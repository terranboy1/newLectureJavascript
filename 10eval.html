<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>eval</title>
</head>
<script>
    var data = '[ \
                    {"co":0.5,"so2":0.005,"o3":0.016,"no2":0.02,"pm10":40,"msrdt_de":"20190210","pm25":28,"msrste_nm":"강남구"}, \
                    {"co":0.7,"so2":0.007,"o3":0.012,"no2":0.038,"pm10":50,"msrdt_de":"20190210","pm25":24,"msrste_nm":"강남대로"}, \
                    {"co":0.5,"so2":0.004,"o3":0.015,"no2":0.024,"pm10":45,"msrdt_de":"20190210","pm25":27,"msrste_nm":"강동구"} \
                ]';

    //스크립트에서 원격에 있는 문서를 받아오면 위처럼 문자열('')로 받아오게 되는데 <자바스크립트에선 문자열 내려쓰기가 안된다>. 그래서 에러가 뜬다. 
    //이것을 해결하려면 2가지 방법이 있는데..
    //ECMA SCRIPT5에선 한칸 띄우고 역슬래쉬(\) 하면 데이터를 하나의 문자열로 인식시킬 수 있다.
    //ECMA SCRIPT6방식도 있는데 그건 뒤에 알려주신다고 한다.(ㅈㄴ 필요하네. ES5로만 하면 데이터마다 역슬래쉬 써야되잖아;;)
    //일단 두가지 방법이 있다는 점을 알아두자..

    //이렇게 문자열로 된 데이터를 받아서 뽑아와야되는데 생각대로 잘 될까? 확인해보자.
    console.log("뽑아낼 수 있을까? " + data[0].co); //안되네.. undefined 뜬다. 문자열이기 때문에 데이터로 인식이 안되는 것은 당연지사.

    //그럼 어떻게하면 데이터로 활용할 수 있을까? eval() 함수 도와줘요!
    eval('var x = 30;');
    console.log(x); //헐 잘 되네ㅋㅋ

    //그럼 위의 data도 eval함수에 넣어볼까?
    eval(data); //요시! 그래 eval함수에 넣었어. 근데 console.log() 괄호 사이에 뭘 넣어야 되는거지??;; 담는 그릇이 없네;;
    console.log(eval(data)); //실행해보면 안다. 데이터만 나오고 담을 곳(변수)이 없다.
    //그럼 아래처럼 해볼까..? 그릇을 만들고("var ar =").. data 문자열을 가져오고(data는 문자열이야!).. ";" 까지 붙이면 완벽한 코드네.. 그걸 eval함수에 담아보자.
    eval("var ar = " + data + ";"); //데이터를 변수에 담아주는 문자열 작성한다. eval은 문자열 해체를 해주니.
    console.log(ar[0].co); //헐 되네 대박;; ar[0]의 co value값.
    console.log(ar[0].so2); //
    console.log(ar[0]); //ar[0] object의 정보들 다 출력.

    //요약하면 JSON으로 데이터를 가져오면 문자열로 받아오게 되는데 문자열이다보니 이걸 파싱할 때 문제가 생긴다. eval함수는 이 문자열을 데이터로 인식시켜주는 함수다.
    //eval은 제이슨과 상관없이 자바스크립트에서 코드를 넘겨받아서 데이터로써 활용할 수 있게 해준다. 그래서 JSON을 파싱할 때 도움이 된다.
    //근데 eval은 범용적인 도구고, JSON에 국한해 JSON 문자열만 파싱할 목적이면 JSON Parser를 사용하면 된다. 이게 그런 차이다~!

</script>
<body>
    
</body>
</html>